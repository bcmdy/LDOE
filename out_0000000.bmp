local bs = {
  {
    "变身",
    "55;7012462;5898287;7143535;6881378;5505125;7209057;107::113"
  }
}
function getn(arr)
  local a = 1
  repeat
    local b = arr[a]
    a = a + 1
  until b == nil
  return a - 2
end
function g(r, id)
  local a = tonumber(gg.getValues(r)[id].value)
  if a < 0 then
    a = a + 4294967296
  end
  return a
end
gg.setRanges(32)
function first()
  gg.clearResults()
  gg.toast("正在搜索...")
  gg.searchNumber("56;6488111;6357096;6357106;7602275;7471205;7143519;7209057::133", 4)
  gg.searchNumber("56", 4)
  local t1 = gg.getResults(20)
  if not t1[1] then
    print("未搜索到游戏数据")
    print("请正确打开地球末日游戏执行脚本")
    os.exit()
  end
  for i = 1, getn(t1) do
    gg.clearResults()
    gg.searchNumber(tostring(t1[getn(t1) - i + 1].address - 8), 4)
    local t2 = gg.getResults(100)
    for j = 1, getn(t2) do
      if j >= 5 then
        gg.addListItems(t2)
        gg.saveList("/sdcard/Notes/addnum.txt")
        break
      end
    end
  end
end
function makemenu(arr)
  local a = {}
  for i = 1, getn(arr) do
    a[i] = arr[i][1]
  end
  return a
end
function list()
  local s1 = gg.getListItems()
  if not s1 then
    first()
  end
  local xx = 0
  for i = 1, getn(s1) do
    if i == getn(s1) then
      xx = i
      break
    end
  end
  return xx
end
function exe(arr)
  local id = list()
  if id == 0 then
    first()
    id = list()
  end
  local menu = gg.choice(makemenu(arr), nil, "鹏程~群员专用多功能脚本")
  if not menu then
    main()
  end
  code = arr[menu][2]
  gg.clearResults()
  gg.searchNumber(code, 4)
  local t1 = gg.getResults(1)
  if not t1 then
  end
  local t2 = gg.getListItems()
  for i = 1, getn(t2) do
    t2[id].value = t1[1].address - 8
    gg.setValues(t2)
    id = id - 1
  end
  print("=======地球末日生存=======")
  print("💸 此脚本由鹏程有万里制作")
  print("💸 QQ：1156898021")
  print("💸 更多脚本和教程请加QQ群：706365166")
end
function sx()
  gg.clearResults()
  gg.setRanges(32)
  gg.searchNumber("11;4390991;4980813;4718671;4849741;5111888;78;1079574528~1079902208;0;1079574528~1079902208::", 4)
  t1 = gg.getResults(100)
  if not t1[1] then
    print("未搜索到数据请进入游戏再试")
    os.exit()
  end
  gg.searchNumber("0", 4)
  for i, v in ipairs(gg.getResults(1)) do
    ac = {}
    ab = {
      {
        address = v.address - 16,
        flags = 4
      },
      {
        address = v.address - 8,
        flags = 4
      },
      {
        address = v.address - 0,
        flags = 4
      }
    }
    table.insert(ac, ab)
  end
  ab[1].flags = 32
  ab[1].value = 942874145
  ab[1].freeze = true
  ab[2].flags = 32
  ab[2].value = 4636878029785866240
  ab[2].freeze = true
  ab[3].flags = 32
  ab[3].value = 4636878028842991616
  ab[3].freeze = true
  gg.setValues(ab)
  gg.addListItems(ab)
  gg.clearResults()
end
function msak()
  gg.clearResults()
  gg.setRanges(32)
  gg.searchNumber("17;1,036,831,949;185,624,732;-1;1,022,739,087;1,630,076,519;-1::41", 4)
  gg.searchNumber("1,036,831,949", 4)
  gg.getResults(99)
  gg.editAll("2,036,831,949", 4)
  gg.toast("10")
  gg.clearResults()
end
function gbak()
  gg.clearResults()
  gg.setRanges(32)
  gg.searchNumber("17;2,036,831,949;185,624,732;-1;1,022,739,087;1,630,076,519;-1::41", 4)
  gg.searchNumber("2,036,831,949", 4)
  gg.getResults(99)
  gg.editAll("1,036,831,949", 4)
  gg.toast("10")
  gg.clearResults()
end
function Exit()
  print("=====地球末日生存=====")
  print("💎此脚本由鹏程有万里制作整理")
  print("💎QQ:1156898021")
  print("💎出自QQ群:706365166")
  os.exit()
end
function main()
  local menu = gg.choice({
    "变身大块头",
    "锁定100血量",
    "开启秒杀AK",
    "关闭秒杀AK",
    "退出脚本"
  }, nil, "鹏程＊群员专用多功能脚本")
  if not menu then
    print("=====地球末日生存=====")
    print("💎此脚本由鹏程有万里制作整理")
    print("💎QQ:1156898021")
    print("💎出自QQ群:706365166")
    os.exit()
  end
  if menu == 1 then
    exe(bs)
  elseif menu == 2 then
    sx()
  elseif menu == 3 then
    msak()
  elseif menu == 4 then
    gbak()
  elseif menu == 5 then
    Exit()
  end
end
main()
